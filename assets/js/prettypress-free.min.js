!function(a){"use strict";var b,c=a.Base64,d="2.1.4";"undefined"!=typeof module&&module.exports&&(b=require("buffer").Buffer);var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=function(a){for(var b={},c=0,d=a.length;d>c;c++)b[a.charAt(c)]=c;return b}(e),g=String.fromCharCode,h=function(a){if(a.length<2){var b=a.charCodeAt(0);return 128>b?a:2048>b?g(192|b>>>6)+g(128|63&b):g(224|b>>>12&15)+g(128|b>>>6&63)+g(128|63&b)}var b=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return g(240|b>>>18&7)+g(128|b>>>12&63)+g(128|b>>>6&63)+g(128|63&b)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,j=function(a){return a.replace(i,h)},k=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),d=[e.charAt(c>>>18),e.charAt(c>>>12&63),b>=2?"=":e.charAt(c>>>6&63),b>=1?"=":e.charAt(63&c)];return d.join("")},l=a.btoa?function(b){return a.btoa(b)}:function(a){return a.replace(/[\s\S]{1,3}/g,k)},m=b?function(a){return new b(a).toString("base64")}:function(a){return l(j(a))},n=function(a,b){return b?m(a).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}).replace(/=/g,""):m(a)},o=function(a){return n(a,!0)},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),q=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return g((c>>>10)+55296)+g((1023&c)+56320);case 3:return g((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return g((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},r=function(a){return a.replace(p,q)},s=function(a){var b=a.length,c=b%4,d=(b>0?f[a.charAt(0)]<<18:0)|(b>1?f[a.charAt(1)]<<12:0)|(b>2?f[a.charAt(2)]<<6:0)|(b>3?f[a.charAt(3)]:0),e=[g(d>>>16),g(d>>>8&255),g(255&d)];return e.length-=[0,0,2,1][c],e.join("")},t=a.atob?function(b){return a.atob(b)}:function(a){return a.replace(/[\s\S]{1,4}/g,s)},u=b?function(a){return new b(a,"base64").toString()}:function(a){return r(t(a))},v=function(a){return u(a.replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(){var b=a.Base64;return a.Base64=c,b};if(a.Base64={VERSION:d,atob:t,btoa:l,fromBase64:v,toBase64:n,utob:j,encode:n,encodeURI:o,btou:r,decode:v,noConflict:w},"function"==typeof Object.defineProperty){var x=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return v(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(a){return n(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return n(this,!0)}))}}}(this);
(function(){function a(a){this.tokens=[],this.tokens.links={},this.options=a||i.defaults,this.rules=j.normal,this.options.gfm&&(this.options.tables?this.rules=j.tables:this.rules=j.gfm)}function b(a,b){if(this.options=b||i.defaults,this.links=a,this.rules=k.normal,this.renderer=this.options.renderer||new c,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=k.breaks:this.rules=k.gfm:this.options.pedantic&&(this.rules=k.pedantic)}function c(){}function d(a){this.tokens=[],this.token=null,this.options=a||i.defaults,this.options.renderer=this.options.renderer||new c,this.renderer=this.options.renderer}function e(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function f(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function g(){}function h(a){for(var b,c,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function i(b,c,f){if(f||"function"==typeof c){f||(f=c,c=null),c=h({},i.defaults,c||{});var g,j,k=c.highlight;try{g=a.lex(b,c)}catch(l){return f(l)}j=g.length;var m=function(){var a,b;try{a=d.parse(g,c)}catch(e){b=e}return c.highlight=k,b?f(b):f(null,a)};return m()}try{return c&&(c=h({},i.defaults,c)),d.parse(a.lex(b,c),c)}catch(l){if(l.message+="\nPlease report this to https://github.com/chjj/marked.",(c||i.defaults).silent)return"<p>An error occured:</p><pre>"+e(l.message+"",!0)+"</pre>";throw l}}var j={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:g,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:g,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:g,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};j.bullet=/(?:[*+-]|\d+\.)/,j.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,j.item=f(j.item,"gm")(/bull/g,j.bullet)(),j.list=f(j.list)(/bull/g,j.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),j._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",j.html=f(j.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,j._tag)(),j.paragraph=f(j.paragraph)("hr",j.hr)("heading",j.heading)("lheading",j.lheading)("blockquote",j.blockquote)("tag","<"+j._tag)("def",j.def)(),j.normal=h({},j),j.gfm=h({},j.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),j.gfm.paragraph=f(j.paragraph)("(?!","(?!"+j.gfm.fences.source.replace("\\1","\\2")+"|"+j.list.source.replace("\\1","\\3")+"|")(),j.tables=h({},j.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),a.rules=j,a.lex=function(b,c){var d=new a(c);return d.lex(b)},a.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},a.prototype.token=function(a,b){for(var c,d,e,f,g,h,i,k,l,a=a.replace(/^ +$/gm,"");a;)if((e=this.rules.newline.exec(a))&&(a=a.substring(e[0].length),e[0].length>1&&this.tokens.push({type:"space"})),e=this.rules.code.exec(a))a=a.substring(e[0].length),e=e[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?e:e.replace(/\n+$/,"")});else if(e=this.rules.fences.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"code",lang:e[2],text:e[3]});else if(e=this.rules.heading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:e[1].length,text:e[2]});else if(b&&(e=this.rules.nptable.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/\n$/,"").split("\n")},k=0;k<h.align.length;k++)/^ *-+: *$/.test(h.align[k])?h.align[k]="right":/^ *:-+: *$/.test(h.align[k])?h.align[k]="center":/^ *:-+ *$/.test(h.align[k])?h.align[k]="left":h.align[k]=null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].split(/ *\| */);this.tokens.push(h)}else if(e=this.rules.lheading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:"="===e[2]?1:2,text:e[1]});else if(e=this.rules.hr.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"hr"});else if(e=this.rules.blockquote.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"blockquote_start"}),e=e[0].replace(/^ *> ?/gm,""),this.token(e,b),this.tokens.push({type:"blockquote_end"});else if(e=this.rules.list.exec(a)){for(a=a.substring(e[0].length),f=e[2],this.tokens.push({type:"list_start",ordered:f.length>1}),e=e[0].match(this.rules.item),c=!1,l=e.length,k=0;l>k;k++)h=e[k],i=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(i-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+i+"}","gm"),"")),this.options.smartLists&&k!==l-1&&(g=j.bullet.exec(e[k+1])[0],f===g||f.length>1&&g.length>1||(a=e.slice(k+1).join("\n")+a,k=l-1)),d=c||/\n\n(?!\s*$)/.test(h),k!==l-1&&(c="\n"===h.charAt(h.length-1),d||(d=c)),this.tokens.push({type:d?"loose_item_start":"list_item_start"}),this.token(h,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(e=this.rules.html.exec(a))a=a.substring(e[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]});else if(b&&(e=this.rules.def.exec(a)))a=a.substring(e[0].length),this.tokens.links[e[1].toLowerCase()]={href:e[2],title:e[3]};else if(b&&(e=this.rules.table.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/(?: *\| *)?\n$/,"").split("\n")},k=0;k<h.align.length;k++)/^ *-+: *$/.test(h.align[k])?h.align[k]="right":/^ *:-+: *$/.test(h.align[k])?h.align[k]="center":/^ *:-+ *$/.test(h.align[k])?h.align[k]="left":h.align[k]=null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(b&&(e=this.rules.paragraph.exec(a)))a=a.substring(e[0].length),this.tokens.push({type:"paragraph",text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1]});else if(e=this.rules.text.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"text",text:e[0]});else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return this.tokens};var k={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:g,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:g,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};k._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,k._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,k.link=f(k.link)("inside",k._inside)("href",k._href)(),k.reflink=f(k.reflink)("inside",k._inside)(),k.normal=h({},k),k.pedantic=h({},k.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),k.gfm=h({},k.normal,{escape:f(k.escape)("])","~|])")(),url:/^(hssttps?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:f(k.text)("]|","~]|")("|","|hssttps?://|")()}),k.breaks=h({},k.gfm,{br:f(k.br)("{2,}","*")(),text:f(k.gfm.text)("{2,}","*")()}),b.rules=k,b.output=function(a,c,d){var e=new b(c,d);return e.output(a)},b.prototype.output=function(a){for(var b,c,d,f,g="";a;)if(f=this.rules.escape.exec(a))a=a.substring(f[0].length),g+=f[1];else if(f=this.rules.autolink.exec(a))a=a.substring(f[0].length),"@"===f[2]?(c=":"===f[1].charAt(6)?this.mangle(f[1].substring(7)):this.mangle(f[1]),d=this.mangle("mailto:")+c):(c=e(f[1]),d=c),g+=this.renderer.link(d,null,c);else if(f=this.rules.url.exec(a))a=a.substring(f[0].length),c=e(f[1]),d=c,g+=this.renderer.link(d,null,c);else if(f=this.rules.tag.exec(a))a=a.substring(f[0].length),g+=this.options.sanitize?e(f[0]):f[0];else if(f=this.rules.link.exec(a))a=a.substring(f[0].length),g+=this.outputLink(f,{href:f[2],title:f[3]});else if((f=this.rules.reflink.exec(a))||(f=this.rules.nolink.exec(a))){if(a=a.substring(f[0].length),b=(f[2]||f[1]).replace(/\s+/g," "),b=this.links[b.toLowerCase()],!b||!b.href){g+=f[0].charAt(0),a=f[0].substring(1)+a;continue}g+=this.outputLink(f,b)}else if(f=this.rules.strong.exec(a))a=a.substring(f[0].length),g+=this.renderer.strong(this.output(f[2]||f[1]));else if(f=this.rules.em.exec(a))a=a.substring(f[0].length),g+=this.renderer.em(this.output(f[2]||f[1]));else if(f=this.rules.code.exec(a))a=a.substring(f[0].length),g+=this.renderer.codespan(e(f[2],!0));else if(f=this.rules.br.exec(a))a=a.substring(f[0].length),g+=this.renderer.br();else if(f=this.rules.del.exec(a))a=a.substring(f[0].length),g+=this.renderer.del(this.output(f[1]));else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),g+=e(this.smartypants(f[0]));else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return g},b.prototype.outputLink=function(a,b){var c=e(b.href),d=b.title?e(b.title):null;return"!"!==a[0].charAt(0)?this.renderer.link(c,d,this.output(a[1])):this.renderer.image(c,d,e(a[1]))},b.prototype.smartypants=function(a){return this.options.smartypants?a.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):a},b.prototype.mangle=function(a){for(var b,c="",d=a.length,e=0;d>e;e++)b=a.charCodeAt(e),Math.random()>.5&&(b="x"+b.toString(16)),c+="&#"+b+";";return c},c.prototype.code=function(a,b){return b?'<pre><code class="lang-'+b+'">'+e(a)+"\n</code></pre>\n":"<pre><code>"+e(a,!0)+"\n</code></pre>"},c.prototype.blockquote=function(a){return"<blockquote>\n"+a+"</blockquote>\n"},c.prototype.html=function(a){return a},c.prototype.heading=function(a,b,c,d){return"<h"+b+">"+a+"</h"+b+">\n"},c.prototype.hr=function(){return"<hr>\n"},c.prototype.list=function(a,b){var c=b?"ol":"ul";return"<"+c+">\n"+a+"</"+c+">\n"},c.prototype.listitem=function(a){return"<li>"+a+"</li>\n"},c.prototype.paragraph=function(a){return"<p>"+a+"</p>\n"},c.prototype.table=function(a,b){return"<table>\n<thead>\n"+a+"</thead>\n<tbody>\n"+b+"</tbody>\n</table>\n"},c.prototype.tablerow=function(a){return"<tr>\n"+a+"</tr>\n"},c.prototype.tablecell=function(a,b){var c=b.header?"th":"td",d=b.align?"<"+c+' style="text-align:'+b.align+'">':"<"+c+">";return d+a+"</"+c+">\n"},c.prototype.strong=function(a){return"<strong>"+a+"</strong>"},c.prototype.em=function(a){return"<em>"+a+"</em>"},c.prototype.codespan=function(a){return"<code>"+a+"</code>"},c.prototype.br=function(){return"<br>"},c.prototype.del=function(a){return"<del>"+a+"</del>"},c.prototype.link=function(a,b,c){var d='<a href="'+a+'"';return b&&(d+=' title="'+b+'"'),d+=">"+c+"</a>"},c.prototype.image=function(a,b,c){var d='<img src="'+a+'" alt="'+c+'"';return b&&(d+=' title="'+b+'"'),d+=">"},d.parse=function(a,b,c){var e=new d(b,c);return e.parse(a)},d.prototype.parse=function(a){this.inline=new b(a.links,this.options,this.renderer),this.tokens=a.reverse();for(var c="";this.next();)c+=this.tok();return c},d.prototype.next=function(){return this.token=this.tokens.pop()},d.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},d.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},d.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth);case"code":return this.renderer.code(this.token.text,this.token.lang);case"table":var a,b,c,d,e,f="",g="";for(c="",a=0;a<this.token.header.length;a++)d={header:!0,align:this.token.align[a]},c+=this.renderer.tablecell(this.inline.output(this.token.header[a]),{header:!0,align:this.token.align[a]});for(f+=this.renderer.tablerow(c),a=0;a<this.token.cells.length;a++){for(b=this.token.cells[a],c="",e=0;e<b.length;e++)c+=this.renderer.tablecell(this.inline.output(b[e]),{header:!1,align:this.token.align[e]});g+=this.renderer.tablerow(c)}return this.renderer.table(f,g);case"blockquote_start":for(var g="";"blockquote_end"!==this.next().type;)g+=this.tok();return this.renderer.blockquote(g);case"list_start":for(var g="",h=this.token.ordered;"list_end"!==this.next().type;)g+=this.tok();return this.renderer.list(g,h);case"list_item_start":for(var g="";"list_item_end"!==this.next().type;)g+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(g);case"loose_item_start":for(var g="";"list_item_end"!==this.next().type;)g+=this.tok();return this.renderer.listitem(g);case"html":var i=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(i);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},g.exec=g,i.options=i.setOptions=function(a){return h(i.defaults,a),i},i.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,smartypants:!1,renderer:new c},i.Parser=d,i.parser=d.parse,i.Renderer=c,i.Lexer=a,i.lexer=a.lex,i.InlineLexer=b,i.inlineLexer=b.output,i.parse=i,"object"==typeof exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):this.marked=i}).call(function(){return this||("undefined"!=typeof window?window:global)}());
var toMarkdown=function(a){function b(a,b){var c="void"===b.type?"<"+b.tag+"\\b([^>]*)\\/?>":"<"+b.tag+"\\b([^>]*)>([\\s\\S]*?)<\\/"+b.tag+">",d=new RegExp(c,"gi"),e="";return e="string"==typeof b.replacement?a.replace(d,b.replacement):a.replace(d,function(a,c,d,e){return b.replacement.call(this,a,c,d,e)})}function c(a){return new RegExp(a+"\\s*=\\s*[\"']?([^\"']*)[\"']?","i")}function d(a){return a=a.replace(/<(ul|ol)\b[^>]*>([\s\S]*?)<\/\1>/gi,function(a,b,c){var d=c.split("</li>");for(d.splice(d.length-1,1),h=0,i=d.length;i>h;h++)if(d[h]){var e="ol"===b?h+1+".  ":"*   ";d[h]=d[h].replace(/\s*<li[^>]*>([\s\S]*)/i,function(a,b){return b=b.replace(/^\s+/,""),b=b.replace(/\n\n/g,"\n\n    "),b=b.replace(/\n([ ]*)+(\*|\d+\.) /g,"\n$1    $2 "),e+b})}return d.join("\n")}),"\n\n"+a.replace(/[ \t]+\n|\s+$/g,"")}function e(a){return a=a.replace(/<blockquote\b[^>]*>([\s\S]*?)<\/blockquote>/gi,function(a,b){return b=b.replace(/^\s+|\s+$/g,""),b=f(b),b=b.replace(/^/gm,"> "),b=b.replace(/^(>([ \t]{2,}>)+)/gm,"> >")})}function f(a){return a=a.replace(/^[\t\r\n]+|[\t\r\n]+$/g,""),a=a.replace(/\n\s+\n/g,"\n\n"),a=a.replace(/\n{3,}/g,"\n\n")}for(var g=[{patterns:"p",replacement:function(a,b,c){return c?"\n\n"+c+"\n":""}},{patterns:"br",type:"void",replacement:"\n"},{patterns:"h([1-6])",replacement:function(a,b,c,d){for(var e="",f=0;b>f;f++)e+="#";return"\n\n"+e+" "+d+"\n"}},{patterns:"hr",type:"void",replacement:"\n\n* * *\n"},{patterns:"a",replacement:function(a,b,d){var e=b.match(c("href")),f=b.match(c("title"));return e?"["+d+"]("+e[1]+(f&&f[1]?' "'+f[1]+'"':"")+")":a}},{patterns:["b","strong"],replacement:function(a,b,c){return c?"**"+c+"**":""}},{patterns:["i","em"],replacement:function(a,b,c){return c?"_"+c+"_":""}},{patterns:"code",replacement:function(a,b,c){return c?"`"+c+"`":""}},{patterns:"img",type:"void",replacement:function(a,b,d){var e=b.match(c("src")),f=b.match(c("alt")),g=b.match(c("title"));return"!["+(f&&f[1]?f[1]:"")+"]("+e[1]+(g&&g[1]?' "'+g[1]+'"':"")+")"}}],h=0,i=g.length;i>h;h++)if("string"==typeof g[h].patterns)a=b(a,{tag:g[h].patterns,replacement:g[h].replacement,type:g[h].type});else for(var j=0,k=g[h].patterns.length;k>j;j++)a=b(a,{tag:g[h].patterns[j],replacement:g[h].replacement,type:g[h].type});a=a.replace(/<pre\b[^>]*>`([\s\S]*)`<\/pre>/gi,function(a,b){return b=b.replace(/^\t+/g,"  "),b=b.replace(/\n/g,"\n    "),"\n\n    "+b+"\n"}),a=a.replace(/^(\s{0,3}\d+)\. /g,"$1\\. ");for(var l=/<(ul|ol)\b[^>]*>(?:(?!<ul|<ol)[\s\S])*?<\/\1>/gi;a.match(l);)a=a.replace(l,function(a){return d(a)});for(var m=/<blockquote\b[^>]*>((?:(?!<blockquote)[\s\S])*?)<\/blockquote>/gi;a.match(m);)a=a.replace(m,function(a){return e(a)});return f(a)};"object"==typeof exports&&(exports.toMarkdown=toMarkdown);
!function(){function a(a){return a.replace(/^\s+|\s+$/g,"")}function b(a){return a.replace(/^\s+/g,"")}function c(c,d,e,f){function g(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=i,this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}},this.traverse_whitespace=function(){var a="";if(a=this.input.charAt(this.pos),this.Utils.in_array(a,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(a,this.Utils.whitespace);)o&&"\n"===a&&this.newlines<=p&&(this.newlines+=1),this.pos++,a=this.input.charAt(this.pos);return!0}return!1},this.get_content=function(){for(var a="",b=[],c=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(this.traverse_whitespace())b.length&&(c=!0);else{if(q){var d=this.input.substr(this.pos,3);if("{{#"===d||"{{/"===d)break;if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}a=this.input.charAt(this.pos),this.pos++,c&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,b),this.print_indentation(b)):(this.line_char_count++,b.push(" ")),c=!1),this.line_char_count++,b.push(a)}}return b.length?b.join(""):""},this.get_contents_to=function(a){if(this.pos===this.input.length)return["","TK_EOF"];var b="",c=new RegExp("</"+a+"\\s*>","igm");c.lastIndex=this.pos;var d=c.exec(this.input),e=d?d.index:this.input.length;return this.pos<e&&(b=this.input.substring(this.pos,e),this.pos=e),b},this.record_tag=function(a){this.tags[a+"count"]?(this.tags[a+"count"]++,this.tags[a+this.tags[a+"count"]]=this.indent_level):(this.tags[a+"count"]=1,this.tags[a+this.tags[a+"count"]]=this.indent_level),this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent,this.tags.parent=a+this.tags[a+"count"]},this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]),delete this.tags[a+this.tags[a+"count"]+"parent"],delete this.tags[a+this.tags[a+"count"]],1===this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}},this.indent_to_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]])}},this.get_tag=function(a){var b,c,d,e="",f=[],g="",h=!1,i=this.pos,j=this.line_char_count;a=void 0!==a?a:!1;do{if(this.pos>=this.input.length)return a&&(this.pos=i,this.line_char_count=j),f.length?f.join(""):["","TK_EOF"];if(e=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(e,this.Utils.whitespace))h=!0;else{if(("'"===e||'"'===e)&&(e+=this.get_unformatted(e),h=!0),"="===e&&(h=!1),f.length&&"="!==f[f.length-1]&&">"!==e&&h&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,f),this.print_indentation(f)):(f.push(" "),this.line_char_count++),h=!1),q&&"<"===d&&e+this.input.charAt(this.pos)==="{{"&&(e+=this.get_unformatted("}}"),f.length&&" "!==f[f.length-1]&&"<"!==f[f.length-1]&&(e=" "+e),h=!0),"<"!==e||d||(b=this.pos-1,d="<"),q&&!d&&f.length>=2&&"{"===f[f.length-1]&&"{"==f[f.length-2]&&(b="#"===e||"/"===e?this.pos-3:this.pos-2,d="{"),this.line_char_count++,f.push(e),f[1]&&"!"===f[1]){f=[this.get_comment(b)];break}if(q&&"{"===d&&f.length>2&&"}"===f[f.length-2]&&"}"===f[f.length-1])break}}while(">"!==e);var k,l,m=f.join("");k=-1!==m.indexOf(" ")?m.indexOf(" "):"{"===m[0]?m.indexOf("}"):m.indexOf(">"),l="<"!==m[0]&&q?"#"===m[2]?3:2:1;var o=m.substring(l,k).toLowerCase();return"/"===m.charAt(m.length-2)||this.Utils.in_array(o,this.Utils.single_token)?a||(this.tag_type="SINGLE"):q&&"{"===m[0]&&"else"===o?a||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):"script"===o&&(-1===m.search("type")||m.search("type")>-1&&m.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?a||(this.record_tag(o),this.tag_type="SCRIPT"):"style"===o&&(-1===m.search("type")||m.search("type")>-1&&m.search("text/css")>-1)?a||(this.record_tag(o),this.tag_type="STYLE"):this.is_unformatted(o,n)?(g=this.get_unformatted("</"+o+">",m),f.push(g),b>0&&this.Utils.in_array(this.input.charAt(b-1),this.Utils.whitespace)&&f.splice(0,0,this.input.charAt(b-1)),c=this.pos-1,this.Utils.in_array(this.input.charAt(c+1),this.Utils.whitespace)&&f.push(this.input.charAt(c+1)),this.tag_type="SINGLE"):"!"===o.charAt(0)?a||(this.tag_type="SINGLE",this.traverse_whitespace()):a||("/"===o.charAt(0)?(this.retrieve_tag(o.substring(1)),this.tag_type="END",this.traverse_whitespace()):(this.record_tag(o),"html"!==o.toLowerCase()&&(this.indent_content=!0),this.tag_type="START",this.traverse_whitespace()),this.Utils.in_array(o,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),a&&(this.pos=i,this.line_char_count=j),f.join("")},this.get_comment=function(a){var b="",c=">",d=!1;for(this.pos=a,input_char=this.input.charAt(this.pos),this.pos++;this.pos<=this.input.length&&(b+=input_char,b[b.length-1]!==c[c.length-1]||-1===b.indexOf(c));)!d&&b.length<10&&(0===b.indexOf("<![if")?(c="<![endif]>",d=!0):0===b.indexOf("<![cdata[")?(c="]]>",d=!0):0===b.indexOf("<![")?(c="]>",d=!0):0===b.indexOf("<!--")&&(c="-->",d=!0)),input_char=this.input.charAt(this.pos),this.pos++;return b},this.get_unformatted=function(a,b){if(b&&-1!==b.toLowerCase().indexOf(a))return"";var c="",d="",e=0,f=!0;do{if(this.pos>=this.input.length)return d;if(c=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(c,this.Utils.whitespace)){if(!f){this.line_char_count--;continue}if("\n"===c||"\r"===c){d+="\n",this.line_char_count=0;continue}}d+=c,this.line_char_count++,f=!0,q&&"{"===c&&d.length&&"{"===d[d.length-2]&&(d+=this.get_unformatted("}}"),e=d.length)}while(-1===d.toLowerCase().indexOf(a,e));return d},this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var b=this.last_token.substr(7);return a=this.get_contents_to(b),"string"!=typeof a?a:[a,"TK_"+b]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!=typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode){if(a=this.get_tag(),"string"!=typeof a)return a;var c="TK_TAG_"+this.tag_type;return[a,c]}},this.get_full_indent=function(a){return a=this.indent_level+a||0,1>a?"":Array(a+1).join(this.indent_string)},this.is_unformatted=function(a,b){if(!this.Utils.in_array(a,b))return!1;if("a"!==a.toLowerCase()||!this.Utils.in_array("a",b))return!0;var c=this.get_tag(!0),d=(c||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!d||this.Utils.in_array(d,b)?!0:!1},this.printer=function(a,c,d,e,f){this.input=a||"",this.output=[],this.indent_character=c,this.indent_string="",this.indent_size=d,this.brace_style=f,this.indent_level=0,this.wrap_line_length=e,this.line_char_count=0;for(var g=0;g<this.indent_size;g++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){this.line_char_count=0,b&&b.length&&(a||"\n"!==b[b.length-1])&&b.push("\n")},this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(a){(a||""!==a)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),a=b(a)),this.print_token_raw(a)},this.print_token_raw=function(a){a&&""!==a&&(a.length>1&&"\n"===a[a.length-1]?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(var b=0;b<this.newlines;b++)this.print_newline(b>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var h,i,j,k,l,m,n,o,p,q;for(d=d||{},void 0!==d.wrap_line_length&&0!==parseInt(d.wrap_line_length,10)||void 0===d.max_char||0===parseInt(d.max_char,10)||(d.wrap_line_length=d.max_char),i=void 0===d.indent_inner_html?!1:d.indent_inner_html,j=void 0===d.indent_size?4:parseInt(d.indent_size,10),k=void 0===d.indent_char?" ":d.indent_char,m=void 0===d.brace_style?"collapse":d.brace_style,l=0===parseInt(d.wrap_line_length,10)?32786:parseInt(d.wrap_line_length||250,10),n=d.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],o=void 0===d.preserve_newlines?!0:d.preserve_newlines,p=o?isNaN(parseInt(d.max_preserve_newlines,10))?32786:parseInt(d.max_preserve_newlines,10):0,q=void 0===d.indent_handlebars?!1:d.indent_handlebars,h=new g,h.printer(c,k,j,l,m);;){var r=h.get_token();if(h.token_text=r[0],h.token_type=r[1],"TK_EOF"===h.token_type)break;switch(h.token_type){case"TK_TAG_START":h.print_newline(!1,h.output),h.print_token(h.token_text),h.indent_content&&(h.indent(),h.indent_content=!1),h.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":h.print_newline(!1,h.output),h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===h.last_token&&""===h.last_text){var s=h.token_text.match(/\w+/)[0],t=null;h.output.length&&(t=h.output[h.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null===t||t[1]!==s)&&h.print_newline(!1,h.output)}h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var u=h.token_text.match(/^\s*<([a-z]+)/i);u&&h.Utils.in_array(u[1],n)||h.print_newline(!1,h.output),h.print_token(h.token_text),h.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":h.print_token(h.token_text),h.indent_content&&(h.indent(),h.indent_content=!1),h.current_mode="CONTENT";break;case"TK_CONTENT":h.print_token(h.token_text),h.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==h.token_text){h.print_newline(!1,h.output);var v,w=h.token_text,x=1;"TK_SCRIPT"===h.token_type?v="function"==typeof e&&e:"TK_STYLE"===h.token_type&&(v="function"==typeof f&&f),"keep"===d.indent_scripts?x=0:"separate"===d.indent_scripts&&(x=-h.indent_level);var y=h.get_full_indent(x);if(v)w=v(w.replace(/^\s*/,y),d);else{var z=w.match(/^\s*/)[0],A=z.match(/[^\n\r]*$/)[0].split(h.indent_string).length-1,B=h.get_full_indent(x-A);w=w.replace(/^\s*/,y).replace(/\r\n|\r|\n/g,"\n"+B).replace(/\s+$/,"")}w&&(h.print_token_raw(y+a(w)),h.print_newline(!1,h.output))}h.current_mode="TAG"}h.last_token=h.token_type,h.last_text=h.token_text}return h.output.join("")}if("function"==typeof define&&define.amd)define(["require","./beautify","./beautify-css"],function(a){var b=a("./beautify"),d=a("./beautify-css");return{html_beautify:function(a,e){return c(a,e,b.js_beautify,d.css_beautify)}}});else if("undefined"!=typeof exports){var d=require("./beautify.js"),e=require("./beautify-css.js");exports.html_beautify=function(a,b){return c(a,b,d.js_beautify,e.css_beautify)}}else"undefined"!=typeof window?window.html_beautify=function(a,b){return c(a,b,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(a,b){return c(a,b,global.js_beautify,global.css_beautify)})}();
function prettypress(a){if(void 0===a)throw new Error("prettypress() called without any config json passed as argument 1.");this.config=a,this.config.selectorElements={},populateElements=function(){for(var a in this.config.elements)this.config.elements[a].element=document.getElementById(this.config.elements[a].id)},createErrorBox=function(a,b){var c=document.createElement("div");c.className="prettypress_errorbox";var d=document.createElement("h3");d.innerHTML=a;var e=document.createElement("div");e.className="description",e.innerHTML=b;var f=document.createElement("a");f.className="close",f.innerHTML="Got it",c.appendChild(d),c.appendChild(e),c.appendChild(f),jQuery(f).on("click",function(){jQuery(c).fadeTo(250,0,function(){c.parentNode.removeChild(c)})}),this.config.elements.external.element.appendChild(c),jQuery(c).fadeTo(250,1)},launchPrettyPress=function(){return this.config.postActive===!1?(this.createErrorBox("No draft visible.","<p>Sorry, you need to enter a post title and save it as a draft before\n				 PrettyPress can launch it's editor.</p>"),!1):(this.syncWpEditors(),void jQuery(this.config.elements.wrapper.element).fadeIn(500,function(){prettypressHandleResize()}))},syncWpEditors=function(){var a=this.getActiveWpEditorContent(),b=this.config.elements.wpTitle.element.value;a=this.reverseFilter(this.config.activeEditor,a);var c=!1,d=null;switch(this.config.activeEditor){case"markdown":a!==this.config.elements.markdown.element.value&&(c=!0,d=this.config.elements.markdown.element);break;case"html":a!==this.config.elements.html.element.value&&(c=!0,d=this.config.elements.html.element);break;case"visual":a!==this.getVisualValue()&&(c=!0,d="visual")}c===!0&&("visual"!==d?d.value=a:this.setVisualValue(a)),b!==window.config.elements.title.element.value&&(window.config.elements.title.element.value=b)},getVisualValue=function(){var a=null;return a=window.tinymce.get(this.config.elements.tinymce.id).getContent()},setVisualValue=function(a){window.tinymce.get(this.config.elements.tinymce.id).setContent(a)},getActiveWpEditorContent=function(){var a=!1;if(jQuery("#wp-content-wrap").hasClass("tmce-active")&&(a=!0),a===!0)return tinymce.get("content").getContent();var b=document.getElementById("content");return this.wpautop(b.value)},wpautop=function(a){return a+="\n",a=a.replace(/(\r\n|\n|\r)/g,"<br />")},closePrettyPress=function(){jQuery(this.config.elements.wrapper.element).fadeOut(500)},tryFillContent=function(){if(this.config.postContentPP)var a=this.decodeContent(this.config.postContentPP);else{var a=this.decodeContent(this.config.postContent);a=this.reverseFilter(this.config.activeEditor,a)}switch(this.config.activeEditor){case"markdown":this.config.elements.markdown.element.value=a;break;case"html":this.config.elements.html.element.value=a;break;case"visual":this.setVisualValue(a)}},reverseFilter=function(a,b){switch(a){case"markdown":return this.htmlToMarkdown(b);case"html":return html_beautify(b);case"visual":return b}return b},decodeContent=function(a){return Base64.decode(a)},liveUpdate=function(a,b){var c=this.config.elements.iframe.element;switch(a){case"title":jQuery(this.config.selectors.title,jQuery(c).contents()).html(b),this.updateWpTitle(b);break;case"markdown":b=this.markdownToHtml(b);var d=b;"function"==typeof prettypressProActive&&(b=prettypressFilterShortcodes(b),b=prettypressFilteroEmbeds(b)),jQuery(this.config.selectors.content,jQuery(c).contents()).html(b),this.updateWpEditor("content",d);break;case"html":var d=b;"function"==typeof prettypressProActive&&(b=prettypressFilterShortcodes(b),b=prettypressFilteroEmbeds(b)),jQuery(this.config.selectors.content,jQuery(c).contents()).html(b),this.updateWpEditor("content",d);break;case"visual":var d=b;"function"==typeof prettypressProActive&&(b=prettypressFilterShortcodes(b),b=prettypressFilteroEmbeds(b)),jQuery(this.config.selectors.content,jQuery(c).contents()).html(b),this.updateWpEditor("content",d)}},updateWpTitle=function(a){this.config.elements.wpTitle.element.value=a},updateWpEditor=function(a,b){switch(a){case"content":var c=document.getElementById("content");tinymce.hasOwnProperty("activeEditor")&&null!==tinymce.get("content")?(tinymce.get("content").setContent(b),c.value=b):c.value=b}},toggleMenu=function(){jQuery(this.config.elements.menu.element).hasClass("prettypress_menu_active")?(jQuery(this.config.elements.menuTrigger.element).removeClass("prettypress_menuTrigger_active"),jQuery(this.config.elements.menu.element).removeClass("prettypress_menu_active")):(jQuery(this.config.elements.menuTrigger.element).addClass("prettypress_menuTrigger_active"),jQuery(this.config.elements.menu.element).addClass("prettypress_menu_active"))},updatePost=function(){var a=this;window.setTimeout(function(){jQuery(a.config.elements.publish.element).click()},500),this.closePrettyPress()},parseShortcodes=function(a){return a},markdownToHtml=function(a){return marked(a)},htmlToMarkdown=function(a){return toMarkdown(a)},syncPPEditors=function(){var a=this.getRawPPContent();switch(this.config.activeEditor){case"markdown":a=this.markdownToHtml(a),this.config.elements.html.element.value=html_beautify(a),this.setVisualValue(a);break;case"html":markdownContent=this.htmlToMarkdown(a),this.config.elements.markdown.element.value=markdownContent,this.setVisualValue(a);break;case"visual":markdownContent=this.htmlToMarkdown(a),this.config.elements.markdown.element.value=markdownContent,this.config.elements.html.element.value=html_beautify(a)}},getRawPPContent=function(){switch(this.config.activeEditor){case"markdown":return this.config.elements.markdown.element.value;case"html":return this.config.elements.html.element.value;case"visual":return this.getVisualValue()}},switchTabs=function(a,b,c){return this.config.activeEditor===a?!1:(this.syncPPEditors(),jQuery(".prettypress_tab_active").removeClass("prettypress_tab_active"),jQuery("#"+b).addClass("prettypress_tab_active"),jQuery("#prettypress_tabs .active").removeClass("active"),jQuery(c).addClass("active"),void(this.config.activeEditor=a))},executeHooks=function(){var a=this;this.config.elements.trig.element.onclick=function(b){b.preventDefault(),a.launchPrettyPress()},this.config.elements.close.element.onclick=function(b){b.preventDefault(),a.closePrettyPress()},this.config.elements.menuTrigger.element.onclick=function(b){b.preventDefault(),a.toggleMenu()},this.config.elements.update.element.onclick=function(b){b.preventDefault(),a.updatePost()},this.config.elements.title.element.onkeyup=function(b){a.liveUpdate("title",this.value)},this.config.elements.markdown.element.onkeyup=function(b){a.liveUpdate("markdown",this.value)},this.config.elements.html.element.onkeyup=function(b){a.liveUpdate("html",this.value)},this.config.elements.proLink.element.onclick=function(a){a.preventDefault();var b=window.open(this.href,"_blank");b.focus()},tinymce.get(this.config.elements.tinymce.id).onKeyUp.add(function(b,c){a.liveUpdate("visual",a.getVisualValue())}),jQuery("[data-click=activateTab]").on("click",function(b){if(b.preventDefault(),!jQuery(this).hasClass("active")){var c=jQuery(this).attr("data-rel"),d=jQuery(this).attr("data-val");a.switchTabs(d,c,this)}}),jQuery("[data-rel=prettypress_preview_size]").on("click",function(a){a.preventDefault();var b=jQuery(this).attr("data-size");prettypressResizePre(b)})},window.onload=function(){this.populateElements(),this.tryFillContent(),this.executeHooks()}}
function prettypressHandleResize(){var a=(jQuery(window).width(),jQuery(window).height()),b=jQuery("#prettypress_leftcolumn"),c=jQuery("#prettypress_resize_handle");for(i=0;i<editorResizeList.length;i++){var d=jQuery(editorResizeList[i]).offset().top,e=parseInt(jQuery(b).css("padding-left"),10),f=a-e-d;jQuery(editorResizeList[i]).css("height",f+"px")}var g=jQuery(b).width(),h=parseInt(jQuery(b).css("padding-left"),10),j=jQuery(c).width(),k=g+h+j/2;jQuery(c).css("left",k+"px")}function prettypressStartResize(){jQuery("#prettypress_resize_leftcolumn").show(),jQuery("#prettypress_resize_rightcolumn").show(),jQuery(window).on("mousemove",function(a){var b=document.getElementById("prettypress_resize_leftcolumn"),c=document.getElementById("prettypress_resize_rightcolumn"),d=jQuery(window).width(),e=a.clientX,f=e,g=d-f;f>500&&g>320&&(b.style.width=f+"px",c.style.width=g+"px",resizeLeftGlobal=f,resizeRightGlobal=g)})}function prettypressStopResize(){if(jQuery("#prettypress_resize_leftcolumn").hide(),jQuery("#prettypress_resize_rightcolumn").hide(),null!==resizeLeftGlobal&&null!==resizeRightGlobal){var a=jQuery(window).width(),b=resizeLeftGlobal/a*100,c=resizeRightGlobal/a*100;jQuery("[data-prettypress_column=left]").css("width",b+"%"),jQuery("[data-prettypress_column=right]").css("width",c+"%"),window.setTimeout(function(){prettypressHandleResize()},750)}jQuery(window).unbind("mousemove")}function prettypressResizePre(a){var b=jQuery(window).width();switch(a){case"desktop":prettypressResizePreview(b>1350?1280:1024);break;case"tablet":prettypressResizePreview(768);break;case"mobile":prettypressResizePreview(320)}}function prettypressResizePreview(a){var b=jQuery(window).width(),c=a,d=b-c,e=d/b*100,f=c/b*100;resizeLeftGlobal=d,resizeRightGlobal=c,jQuery("[data-prettypress_column=left]").css("width",e+"%"),jQuery("[data-prettypress_column=right]").css("width",f+"%"),window.setTimeout(function(){prettypressHandleResize()},750)}var editorResizeList=[],resizeLeftGlobal=null,resizeRightGlobal=null;jQuery(document).ready(function(){jQuery("#prettypress_resize_handle").on("mousedown",function(a){a.preventDefault(),prettypressStartResize()}),jQuery(window).on("mouseup",function(a){prettypressStopResize()})}),jQuery(window).load(function(){jQuery("[data-resize=editor]").each(function(){editorResizeList.push(this)}),prettypressHandleResize()}),jQuery(window).resize(function(){prettypressHandleResize()});